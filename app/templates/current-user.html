{% load static %}

<!DOCTYPE html>
<html>
    <head>
      <script src="https://www.gstatic.com/firebasejs/3.5.1/firebase-app.js"></script>
      <script src="{% static 'firebase-messaging.js' %}"></script>
      <script src="{% static 'user.js' %}" type="text/javascript"></script>
      <link href="/static/css/user.css" rel="stylesheet">
      <link href="http://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css" rel="stylesheet" />
      <link href="https://fonts.googleapis.com/css?family=Roboto:300,400" rel="stylesheet">
      <link rel="manifest" href="{% static 'manifest.json' %}">
      <meta name="viewport" content="width=device-width, initial-scale=1">
    </head>
    <body>
      <div class="card affirmation">
        <div class="card-icon">
          <div class="ion-android-checkmark-circle"></div>
        </div>
        <div class="card-content">
          You've joined a flock!
        </div>
      </div>
      <div class="card flock">
        <div class="progressbar">
          <div id="fill" class="progressbar-fill" style="transform: translate3d(-72%, 0, 0);"></div>
        </div>
        <div class="card-content">
          <div class="cell">
            <div id="progress" class="value">
              28%
            </div>
            <div class="unit">
              Progress
            </div>
          </div>
          <div class="cell">
            <div id="participants" class="value">
              70
            </div>
            <div class="unit">
              Participants
            </div>
          </div>
          <div class="cell">
            <div class="value">
              250
            </div>
            <div class="unit">
              Target
            </div>
          </div>
        </div>
      </div>

      <h2>Achievements</h2>

      <div class="card achievements">
        <div class="card-image" style="background-image: url('/static/images/snowtrees.jpg')">
        </div>
        <div class="card-content">
          <div class="cell">
            <div class="value">
              10
            </div>
            <div class="unit">
              Tons CO2 Saved
            </div>
          </div>
          <div class="cell">
            <div class="value">
              $40
            </div>
            <div class="unit">
              Cash Saved
            </div>
          </div>
        </div>
      </div>

      <button class="floating">
        <i class="ion-android-share"></i>
      </button>

    </body>
    <script type="application/javascript">
      var updateProgress = function(){
        var participants = document.getElementById('participants');
        var progress = document.getElementById('progress');
        var fill = document.getElementById('fill');

        if((~~participants.innerText) === 250){
          return;
        }

        var nextParticipants = ~~(participants.innerText) + 10;
        var nextProgress =~~((nextParticipants/250)*100);

        participants.innerText = nextParticipants;
        progress.innerText = `${nextProgress}%`;
        fill.style.transform = `translate3d(-${100-nextProgress}%, 0, 0)`;
      }

      window.setInterval(function () {
        var shouldUpdate = (~~(Math.random() * 100) % 2) === 0;
        if(shouldUpdate){
          updateProgress()
        }
      }, 1000);
    </script>
</html>
