{% load static %}

<!DOCTYPE html>
<html>
    <head>
      <script src="https://www.gstatic.com/firebasejs/3.5.1/firebase-app.js"></script>
      <script src="{% static 'firebase-messaging.js' %}"></script>
      <script src="{% static 'user.js' %}" type="text/javascript"></script>
      <link href="http://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css" rel="stylesheet" />
      <link href="https://fonts.googleapis.com/css?family=Roboto:300,400" rel="stylesheet">
      <link rel="manifest" href="{% static 'manifest.json' %}">
      <meta name="viewport" content="width=device-width, initial-scale=1">

      <style>
        body, button {
          font-family: 'Roboto';
        }

        h2 {
          font-size: 20px;
          margin: 28px 8px 20px;
        }

        .card {
          padding: 30px 20px;
          box-shadow: rgba(0, 0, 0, 0.2) 0px 1px 4px 0px;
          margin-bottom: 16px;
        }

        .card-image {
          background-position: 50% 50%;
          background-repeat: no-repeat;
          background-size: cover;
          border-radius: 2px 2px 0 0;
          flex: 0 0 auto;
          height: 120px;
          margin: -30px -20px 24px;
          width: calc(100% + 40px);
        }

        .flock .card-content {
          display: flex;
          flex: 0 0 100%;
          justify-content: space-between;
        }

        .cell {
          text-align: center;
        }

        .cell .value {
          font-size: 24px;
          padding-bottom: 8px;
        }

        .cell .unit {
          font-size: 16px;
        }

        .affirmation {
          align-items: center;
          display: flex;
          justify-content: flex-start;
          padding: 20px;
        }

        .affirmation .card-icon {
          font-size: 36px;
          margin-right: 24px;
        }

        .affirmation .card-content {
          flex: auto;
          width: auto;
        }

        .achievements {
          flex-wrap: wrap;
        }

        .achievements .card-content {
          display: flex;
          flex-wrap: wrap;
          justify-content: space-around;
        }

        .achievements .cell {
          flex: 1 1 50%;
          margin: 0;
        }

        .progressbar {
          background-color: #f1f1f1;
          flex: 0 0 100%;
          margin-bottom: 16px;
          overflow: hidden;
        }

        .progressbar-fill {
          background-color: #26C6DA;
          height: 8px;
          transition: transform 256ms linear;
        }

        button {
          align-items: center;
          background-color: #26C6DA;
          border: 0;
          border-radius: 2px;
          box-shadow: rgba(0, 0, 0, 0.2) 0px 1px 4px 0px;
          color: white;
          display: inline-flex;
          font-size: 14px;
          font-weight: 400;
          height: 36px;
          padding: 0px 16px;
          justify-content: center;
          text-transform: uppercase;
          -webkit-appearance: none;
        }

        .floating {
          border-radius: 50%;
          display: none;
          position: absolute;
          right: 12px;
          top: 54px;
          width: 36px;
        }

        #push-notification {
          position: absolute;
          padding: 10px;
          background-color: #333;
          color: #FFF;
          width: 100%;
          min-height: 40px;
        }
      </style>
    </head>
    <body>
      <div id="push-notification" style="position: absolute; padding: 10px; background-color: #333; color: #FFF; width: 100%; min-height: 40px;"></div>
      <div class="card affirmation">
        <div class="card-icon">
          <div class="ion-android-checkmark-circle"></div>
        </div>
        <div class="card-content">
          You've joined a flock!
        </div>
      </div>
      <div class="card flock">
        <div class="progressbar">
          <div id="fill" class="progressbar-fill" style="transform: translate3d(-44%, 0, 0);"></div>
        </div>
        <div class="card-content">
          <div class="cell">
            <div id="progress" class="value">
              56%
            </div>
            <div class="unit">
              Progress
            </div>
          </div>
          <div class="cell">
            <div id="participants" class="value">
              140
            </div>
            <div class="unit">
              Participants
            </div>
          </div>
          <div class="cell">
            <div class="value">
              250
            </div>
            <div class="unit">
              Target
            </div>
          </div>
        </div>
      </div>

      <h2>Achievements</h2>

      <div class="card achievements">
        <div class="card-image" style="background-image: url('/static/images/snowtrees.jpg')">
        </div>
        <div class="card-content">
          <div class="cell">
            <div class="value">
              10
            </div>
            <div class="unit">
              Tons CO2 Saved
            </div>
          </div>
          <div class="cell">
            <div class="value">
              $40
            </div>
            <div class="unit">
              Cash Saved
            </div>
          </div>
        </div>
      </div>

      <button class="floating">
        <i class="ion-android-share"></i>
      </button>

    </body>
    <script type="application/javascript">
      var updateProgress = function(){
        var participants = document.getElementById('participants');
        var progress = document.getElementById('progress');
        var fill = document.getElementById('fill');

        if((~~participants.innerText) === 250){
          return;
        }

        var nextParticipants = ~~(participants.innerText) + 10;
        var nextProgress =~~((nextParticipants/250)*100);

        participants.innerText = nextParticipants;
        progress.innerText = `${nextProgress}%`;
        fill.style.transform = `translate3d(-${100-nextProgress}%, 0, 0)`;
      }

      window.setInterval(updateProgress, 2000);
    </script>
</html>
